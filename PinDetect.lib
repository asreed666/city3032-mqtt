https://os.mbed.com/users/reedas/code/PinDetect/#d552d28997652031e343b9242b9dba04206cecc1